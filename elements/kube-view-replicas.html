<link rel="import" href="../bower_components/polymer/polymer.html">

<link rel="import" href="kube-replc.html">

<polymer-element name="kube-view-replicas" attributes="data core">
  <template>
    <template repeat="{{item in data.items}}">
      <kube-replc rid="{{item.id}}" data="{{item}}" core="{{core}}"></kube-replc>
    </template>
  </template>
  <script>
    Polymer({
      data: null,
      observe: {
        'core': 'refresh'
      },

      ready: function() {
        if (!this.data)
          this.refresh();
      },

      receive: function(response) {
        this.data = response;
      },

      refresh: function() {
        this.refreshJob = this.job(this.refreshJob, function(){
          this.core && this.core.listReplicas({callback: this.receive.bind(this)});
        }, 0);
      }
    });
  </script>
</polymer-element>
